---
title: "Satena version 1.9.x"
description: "新機能の紹介"
tags: ["Android","Satena","はてなブックマーク"]
date: 2021-09-11T20:40:00+09:00
archives:
    - 2021
    - 2021-09
    - 2021-09-11
hide_overview: false
draft: false
---

{{<AndroidApp_Satena>}}

---

## 既知の不具合，開発状況

[Issues · suihan74/Satena](https://github.com/suihan74/Satena/issues)

---

## アプリ更新履歴

[Satena/release_notes.txt at master · suihan74/Satena](https://github.com/suihan74/Satena/blob/master/app/src/main/res/raw/release_notes.txt)

[過去バージョンのリリース記事](/tags/satena/)

---

今回は使い勝手向上を目指して割と色々追加しました。

## 新機能

### [v1.9.0](#v190)

- [エクストラスクロール](#エクストラスクロール)
- [エントリ項目タップアクショントリガの追加](#エントリ項目タップアクショントリガの追加)
- [エントリ項目のコメント部分に長押しメニューを追加](#エントリ項目のコメント部分に長押しメニューを追加)
- [スター付与ボタンの当たり判定をブクマ項目右端に拡大](#スター付与ボタンの当たり判定をブクマ項目右端に拡大)
- [ブラウザにプログレスバーを追加](#ブラウザにプログレスバーを追加)
- [アプリの画像キャッシュを一定期間毎に自動削除](#アプリの画像キャッシュを一定期間毎に自動削除)
- [ブラウザの古い閲覧履歴の自動削除](#アプリの画像キャッシュを一定期間毎に自動削除)
- [NG URL/TEXT設定ページを刷新](#ng-urltext設定ページを刷新)
- [外部アプリを開く際にデフォルトアプリを優先利用する設定](#外部アプリを開く際にデフォルトアプリを優先利用する設定)
- [外部アプリの候補にWebアプリ以外のアプリも含めるようにした](#外部アプリの候補にWebアプリ以外のアプリも含めるようにした)

---

## v1.9.0

### エクストラスクロール

{{<tweet 1429336984779059203>}}

{{<img src="extra_scroll_entry.png" zoom=".5" title="エントリリスト用の設定">}}

{{<img src="extra_scroll_bookmark.png" zoom=".5" title="ブクマリスト用の設定">}}

{{<img src="extra_scroll_modes.png" zoom=".5" title="エクストラスクロールのツマミ表示設定">}}

エントリ一覧・ブクマ一覧にエクストラスクロール機能を追加しました。  
ツマミを下方向にスクロールするとリストの上部マージンが拡大します。スマホの片手操作でリスト一番上の項目をタップしやすくするための機能です。

不要の場合は設定画面で無効化できます。

### エントリ項目タップアクショントリガの追加

{{<img src="right_edge_tap.png" zoom=".5" title="画像部分のタップ">}}

{{<img src="right_edge_tap_actions.png" zoom=".5" title="エントリのタップアクショントリガを追加">}}

エントリ項目右端の記事画像が表示されている部分のタップ・長押し・複数回タップに機能を割り当てられるようにしました。

### エントリ項目のコメント部分に長押しメニューを追加

{{<img src="bookmark_comment_menu.png" zoom=".5" title="ブコメの長押しメニュー">}}

{{<img src="tweet_menu.png" zoom=".5" title="ツイートなどの長押しメニュー">}}

エントリ画面に表示されるコメント（自分がブクマ済みの場合は自分のブコメ、マイホットエントリ画面などの場合はツイートなど）用の長押しメニューを追加しました。

自分のブコメの場合はここから編集や削除もできるようにしてあります。

### スター付与ボタンの当たり判定をブクマ項目右端に拡大

{{<img src="right_edge_star_popup.png" zoom=".5" title="スター付与ボタンの当たり判定拡大">}}

{{<img src="extra_scroll_bookmark.png" zoom=".5" title="スター付与ボタンの当たり判定に関する設定">}}

ボタンが小さくて押しづらいという声がしばしば聞こえてくるので、（雑に）拡大しました。（大体上記SSのハイライト部分）  
今まで通りボタン部分だけの当たり判定に戻したい場合は設定画面で変更できます。

### ブラウザにプログレスバーを追加

{{<img src="progressbar.png" zoom=".5" title="読込み進捗の表示">}}

アプリ内ブラウザのページ読み込み中、アドレスバーの近くに進捗表示をするようにしました。今さら感。

### アプリの画像キャッシュを一定期間毎に自動削除

{{<img src="clearing_image_cache_span.png" zoom=".5" title="画像キャッシュクリア間隔">}}

一定日数ごとにアプリの画像キャッシュを全削除する設定を追加しました。

### ブラウザの古い閲覧履歴の自動削除

{{<img src="history_lifespan.png" zoom=".5" title="アプリ内ブラウザ閲覧履歴の自動削除設定">}}

一定期間経過した古い閲覧履歴を削除できるようにしました。

### NG URL/TEXT設定ページを刷新

{{<img src="ng_url_text.png" zoom=".5" title="NG設定を種類ごとにタブ分け">}}

これまで一緒くたにひとつのリストに表示していた非表示URLとNGワードを別々のタブに分けて表示するようにしました。

### 外部アプリを開く際にデフォルトアプリを優先利用する設定

{{<img src="use_intent_chooser.png" zoom=".5" title="アプリ選択ダイアログを毎回開くかどうかの設定">}}

外部アプリを開く際に、URLに対するデフォルトアプリが設定されている場合にアプリ選択ダイアログを開かずにデフォルトアプリでリンクを開けるようにしました。

上記SSの「外部アプリを開く際に毎回アプリを選択する」をONにするとv1.8までと同じように毎回アプリ選択ダイアログが開かれ、OFFにすると可能な限りデフォルトアプリでリンクを開くようになります。

古いAndroidバージョンをサポートしつつ、アプリ候補からSatena自身を除外して暗黙的インテントを発行するイイ感じの方法がわからなかったのでこんな感じの運用になっていますが、正直そろそろAPI26以前のサポート切ってもいいんじゃないかみたいな気持ちにはなっています。。。

### 外部アプリの候補にWebアプリ以外のアプリも含めるようにした

これまでは「https://~ 」をIntent.ACTION_VIEWで渡せるWebブラウザだけを外部アプリの候補に表示していましたが、v1.9では開きたいURLに関連付けられた他のアプリも表示するようにしました。
