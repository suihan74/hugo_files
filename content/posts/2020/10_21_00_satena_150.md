---
title: "Satena version 1.5.0"
description: "新機能の紹介"
tags: ["Android","Satena","はてなブックマーク"]
date: 2020-10-21T23:00:00+09:00
lastmod: 2020-11-30T19:55:00+09:00
archives:
    - 2020
    - 2020-10
    - 2020-10-21
hide_overview: false
draft: false
---

<div class="appreach"><img src="https://lh3.googleusercontent.com/8s4Fzo7AmnoNOT-pbsRoBSYbmBFgfS98l0Qatr1-aHYCRUJlHwab6jB1rijGC1_FYA=s128" alt="Satena - はてなブックマーククライアント, はてブビューア" class="appreach__icon"><div class="appreach__detail" style=""><p class="appreach__name">Satena - はてなブックマーククライアント, はてブビューア</p><p class="appreach__info"><span class="appreach__developper">すいはん</span><span class="appreach__price">無料</span><span class="appreach__posted">posted with<a href="https://mama-hack.com/app-reach/" title="アプリーチ" target="_blank" rel="nofollow">アプリーチ</a></span></p></div><div class="appreach__links" style=""><a href="https://play.google.com/store/apps/details?id=com.suihan74.satena" target="_blank" rel="nofollow" class="appreach__gplink"><img src="https://nabettu.github.io/appreach/img/gplay_ja.png"></a></div></div>

---

## 既知の不具合，開発状況

[Issues · suihan74/Satena](https://github.com/suihan74/Satena/issues)

---

## アプリ更新履歴

[Satena/release_notes.txt at master · suihan74/Satena](https://github.com/suihan74/Satena/blob/master/app/src/main/res/raw/release_notes.txt)

[version 1.5.16](#version-1516-での追加項目) - 「戻る/進む」履歴にアクセスできるようにしました。(2020-11-30)

[version 1.5.11](#version-1511-での追加項目) - 小規模な機能追加を行いました。

---

## 新機能

### ■多機能版アプリ内Webブラウザ

{{<img src="inner_browser.png" zoom=".5" title="新アプリ内ブラウザ">}}

v1.4までの```CustomTabsIntent```を使った簡易的な内部ブラウザに加え、機能性を重視した```WebView```版の内部ブラウザを新規作成しました。

個人情報や金銭などの絡むセキュリティ的にも重要なページを、このブラウザを利用して閲覧することは推奨しません。できるだけ避けてください。  
また、内部ブラウザを利用してのブラウジングで何らかの問題や損失が発生した場合においても責任はとれませんので、注意してご利用ください。

#### ブクマ表示・投稿

{{<img src="bookmarks.png" zoom=".5" title="新着順ブクマリストをドロワに表示">}}
{{<img src="post_bookmark.png" zoom=".5" title="ブクマ投稿エリア">}}

現在表示中のページに対して付けられたブコメがドロワ領域に表示されます。  
現状では新着リストだけが表示できます。

サインイン済みであれば、ここからすぐにブクマを投稿することができます。

#### URLブロック機能

{{<img src="url_block.png" zoom=".5" title="ブラウジング中に新しいブロック設定を追加するダイアログ">}}
{{<img src="blocked_urls.png" zoom=".5" title="ブロック設定一覧">}}

ページを表示する際に読み込んだすべてのリソースURLを提示し、今後読み込みたくないものを選択してブロックすることができます。

ブロック設定は部分一致または正規表現で設定できます。

```text
例)
.hoge.com
このように入力すると".hoge.com"をURLに含むすべてのリソースがブロックされます。
```

URLブロック設定によってはページがうまく表示できなくなるなどの問題が発生する場合があります。

デフォルトでプリセットをある程度用意してあるので、何も設定していなくてもそこそこいい感じになるかと思います。  
ブロック機能を使用しない場合は設定画面やブラウザのメニューからOFFにすることができます。

#### アドレスバー検索

{{<img src="search_engines.png" zoom=".5" title="プリセット一覧">}}

アドレスバーにURLの代わりに任意の文字列を入力すると、指定した検索エンジンを使用してweb検索を行えます。

現在のところ、幾つか用意したプリセットの中から使用する検索エンジンを選択できます。  
(将来的にユーザーが自由に追加できるようにするかもしれません)

#### お気に入りサイトの登録

(はてブのではなく、広義の意味の)ブックマークを設定できます。  
この設定は、後述の「お気に入りサイト」カテゴリの表示対象リストと共有されます。

#### UserAgentの設定

任意でUserAgentを設定することができます。

#### サイトテーマの設定 (ダークテーマに関する設定)

「対応しているページでダークテーマを使用する」「全ページを強制的に暗くする」「Satenaのテーマにあわせる」「ダークテーマを使用しない」を選択できます。

「アプリのテーマにあわせる」では、Satenaのテーマ設定で「Dark」を選択している場合「対応しているページでダークテーマを使用する」と同じ挙動になります。「Light」を選択している場合は「ダークテーマを使用しない」になります。

「全ページを強制的に暗くする」では、ページがダークテーマに対応しているかどうかに関わらず全体が黒基調の色調になります。これによりページの表示が意図されたものではなくなったりおかしくなったりする可能性はあります。

{{<img src="settings.png" zoom=".25" title="設定画面。ブラウザ内からでも設定変更できます">}}

#### はてなキーワードのポップアップ表示

{{<img src="keywords.png" zoom=".5" title="はてなキーワード">}}

「はてな匿名ダイアリ」や「はてなブログ」で使用される「はてなキーワード」をそのページ内で取得してポップアップ表示することができます。

---

### ■「お気に入りサイト」カテゴリを追加

{{<img src="favorite_sites.png" zoom=".5" title="複数お気に入りサイトの新着エントリ">}}

お気に入りに登録したサイトの「人気」「新着」エントリを一括取得・表示ができます。  
登録したサイト数分の通信が更新のたびに発生するので大量に登録する場合は注意してください。

先述の通り、内部ブラウザで(広義の)ブックマークとして登録されたページリストと内容が共有されます。

---

### ■エントリ一覧画面ボトムメニューに「アプリ内ウェブブラウザを開く」項目を追加できるようにした

このボタンを使用して内部ブラウザを開く場合、設定画面で「スタートページ」に指定したURLを最初に開きます。

---

### ■ドロワ位置をユーザーが設定できるようにした

{{<img src="drawer_right.png" zoom=".5" title="従来の右ドロワ">}}
{{<img src="drawer_left.png" zoom=".5" title="新しく設定できる左ドロワ">}}

画面端スワイプで表示できるドロワ領域を、左右どちらの端に合わせて配置するかを設定できるようにしました。  
現状ではすべての画面で共通の設定になります。

---

## version 1.5.11 での追加項目

### ■ダイアログにダークテーマを追加

{{<img src="dark_dialog.png" zoom=".5" title="ダークテーマのダイアログ">}}

ダイアログのテーマを以下の3つから選択できるようにしました。

- ライトテーマ

- ダークテーマ

- アプリのテーマにあわせてダイアログのテーマを設定する

今まではアプリがダークテーマでも白いダイアログが表示されていましたが(初期にテーマ固定で作って後で変えるのが面倒になった)、黒いダイアログもやっぱほしいなと思って追加しました。

ブクマ投稿画面はダイアログではあるんですが、アプリテーマの方で設定されるようになっています。(あとで変えるかも)

### ■ダイアログの外側をタッチしたときにダイアログを閉じるか設定できるようにした

{{<img src="settings_for_dialog.png" zoom=".5" title="ダイアログの設定を追加">}}

`ON`にすると、各種ダイアログ(ブクマ投稿画面含む)表示中に、ダイアログ外側の暗くなっている部分をタッチしたときに編集内容がキャンセルされてダイアログが閉じます。(これまで通りの挙動)

`OFF`にすると画面外をタッチしても閉じなくなるので、投稿画面などでの誤タッチでイライラする場合などは良いかもしれません。

現状では全ダイアログ共通の設定ですが、必要を感じたら投稿画面だけ別設定とかにするかもしれません。

---

## version 1.5.16 での追加項目

### ■「戻る/進む」履歴にアクセスできるようにした

{{<img src="backstack_light.png" zoom=".5" title="「戻る/進む」履歴">}}

{{<img src="backstack_dark.png" zoom=".5" title="「戻る/進む」履歴(ダークテーマ)">}}

{{<img src="add_backstack_to_options_menu.png" zoom=".5" title="「戻る/進む」履歴を表示するメニュー項目を追加">}}

戻るボタンの長押しか、オプションメニューの「戻る/進む」から、現在ブラウジング中のページ遷移履歴をボトムシートに表示する機能を追加しました。

現在表示中のページがハイライト表示されており、各項目は単タップで「ページを開く」、ロングタップで「メニューを開く」が実行できます。

ボトムシートを下に引っ張るか、外側の暗くなっている部分をタップするか、戻るボタンで閉じることができます。

本来v1.6で追加しようと思っていましたが、いつまで経ってもブクマ画面関係の刷新作業が完了しないので抜き出してきました。

---

## 今後の予定

(というか、やれたらなぁとぼんやり思っていること)

- ブクマ一覧画面とブラウザ画面のブクマリスト処理を共通化する

  v1.5ではブクマ一覧画面の方は手をつけていないはずですが、色々問題やパフォーマンス悪い部分があるので、  
  アプリ内ブラウザを作る際に新造した内部処理で置き換えたいと思っています。

- ブラウザの機能強化

  色々できる余地はまだありそうです。

  - アドレスバーの入力補助機能

    履歴・お気に入りサイトや検索結果のサジェストとか

  - URLブロックを実行しないサイト

  - オプションメニューをChromeっぽい感じに

  - ~~「ページを戻る/進む」の強化~~ **v1.5.16で追加**

    ~~ページ遷移履歴を表示したりとかできたらいいな~~
