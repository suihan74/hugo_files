---
title: "Satena version 1.3.0"
description: "新機能の紹介"
tags: ["Android","Satena","はてなブックマーク"]
date: 2020-08-19T22:15:00+09:00
lastmod: 2020-08-24T16:20:00+09:00
archives:
    - 2020
    - 2020-08
    - 2020-08-19
hide_overview: false
draft: false
---

## ->[不具合情報](#不具合情報)

(2020-08-24 16:20)

---

<div class="appreach"><img src="https://lh3.googleusercontent.com/8s4Fzo7AmnoNOT-pbsRoBSYbmBFgfS98l0Qatr1-aHYCRUJlHwab6jB1rijGC1_FYA=s128" alt="Satena - はてなブックマーククライアント, はてブビューア" class="appreach__icon"><div class="appreach__detail" style=""><p class="appreach__name">Satena - はてなブックマーククライアント, はてブビューア</p><p class="appreach__info"><span class="appreach__developper">すいはん</span><span class="appreach__price">無料</span><span class="appreach__posted">posted with<a href="https://mama-hack.com/app-reach/" title="アプリーチ" target="_blank" rel="nofollow">アプリーチ</a></span></p></div><div class="appreach__links" style=""><a href="https://play.google.com/store/apps/details?id=com.suihan74.satena" target="_blank" rel="nofollow" class="appreach__gplink"><img src="https://nabettu.github.io/appreach/img/gplay_ja.png"></a></div></div>

## 新機能

### ■アプリ内アップデート

アプリ内でアップデートを通知、そのままアップデート実行できるようにした。

{{<img src="/images/2020/08_01_00/in-app-update.png" zoom=".5" title="アップデート通知">}}

{{<img src="/images/2020/08_01_00/in-app-update-settings.png" zoom=".5" title="アップデート通知対象を設定可能">}}

この他、一度無視したアップデートを再び通知するかどうかを設定できるようにした。

ただしアップデート情報の取得はPlayストアアプリのキャッシュ更新に依るので、アップデートを公開しても即座にユーザーに通知されるわけではなく、またこちらでその辺制御する術もなさそうだった。

### ■エントリ一覧画面

#### 「タイムカプセル」カテゴリを追加

[15周年の記念ページ](https://b.hatena.ne.jp/15th)に表示されている「はてなブックマーク全体の歴史」「あなたの歴史」に表示されるエントリリストをSatenaで取得して表示できるようにした。

{{<img src="time_capsule.png" zoom=".5" title="今のところサムネイルは表示できない">}}

サムネイルが表示できないのが寂しいが、なんとかできそうだったらなんとかする。  
ほか、ロード周りに問題が残っているので、余裕のある時になんとかしたい。

あと色々よくわからないので、いつか急にカテゴリごと消えるかもしれない。

#### カテゴリ選択ドロワの表示形式に「テーブル」を追加

{{<img src="/images/2020/08_01_00/categories_mode_dev_1.png" zoom=".5" title="上部が少し寂しい">}}

#### ボタンや検索入力などを画面下部に集約するレイアウトモードを追加した

{{<img src="/images/2020/08_01_00/bottom_layout_dev_2.png" zoom=".5" title="一番上までスクロールするボタンだけある画面。少し寂しい">}}

{{<img src="/images/2020/08_01_00/bottom_layout_dev_3.png" zoom=".5" title="マイブックマーク画面を開いたところ">}}

{{<img src="/images/2020/08_01_00/bottom_layout_dev_4.png" zoom=".5" title="マイブックマーク画面で検索している様子">}}

アップデートするとデフォルトでこちらのモードに切り替わるように（うっかり）してしまったが、「設定>エントリ画面」で従来のものに戻すこともできる。

メニュー初期化処理を機械的に一括化できたので割と簡単にできた。よかったですね。

ブコメ一覧画面にも盛り込みたいけどあっちはもっと面倒くさそう。

### ■設定のバックアップ

- 「設定をファイルに保存」「設定をファイルから読み込む」のファイル選択ダイアログを独自の物からストレージアクセスフレームワークに変更

- 不要になったファイル読み書きのパーミッションを削除

### ■リリースノート

- 更新後最初の起動時に表示するダイアログでは、以前の利用バージョンから現在のバージョンまでの差分のみを表示するように変更

- インストール後初回起動時には表示しないように変更

### ■スプラッシュ画面

これまで直接エントリ画面を開いていたが、起動時のログインや初回起動時の画面遷移などが行われるタイミングがあまりよくなかったので、より安定して行えるようにスプラッシュ画面を追加した。

アプリを開くたびに表示されたりはしないのでそれほどストレスにはならない（はず）。

## ほか

- フォント調整機能は面倒さの割にイマイチ面白くなかったので見送ることにしました。

---

## 不具合情報

### v1.3.5 公開

`v1.3.0`~`v1.3.3`での既知の不具合のうち、とくに致命的な以下の数点を修正した`v1.3.5`を公開しましたので、ストアよりアップデートをお願いします。

- エントリ一覧画面

  - 画面回転などで画面復帰処理が発生するとクラッシュする

  - 「タイムカプセル」カテゴリで「あなたの歴史」に切り替えた後タブを移動するとスクロール位置がおかしくなる

- ブクマ一覧画面

  - 初期化失敗時に稀にクラッシュする場合がある

- アップデート通知

  - 「無視したアップデートを再度通知しない」設定にしていて、なおかつアップデートを無視した場合クラッシュし続ける  
  （ストアでアップデートを実行しない限り繰り返される）
